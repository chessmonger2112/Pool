<!DOCTYPE html>
<html>
  <head>
    <title></title>
  </head>
  <body>
    <script src="https://fb.me/react-0.13.3.js"></script>
    <script src="https://fb.me/JSXTransformer-0.13.3.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script type="text/jsx">

      console.log("sup my glip glops!!");

      var colors = ["white","red", "blue", "yellow", "black", "orange", "purple"];
      var pocketAttributes = [
        {x: 0,y: 0,borderRadius: "0 0 75% 0"},
        {x: 802,y: 0,borderRadius: "0 0 0 75%"},
        {x: 802,y: 303,borderRadius: "75% 0 0 0"},
        {x: 0,y: 303,borderRadius: "0 75% 0 0"}];

      var Pocket = React.createClass({
        render: () => {
          var pocketStyle ={
            // borderBottomRightRadius: "75%",
            backgroundColor: "black",
            height: "30px",
            width: "30px",
            position: "absolute"
          };
          var pockets = pocketAttributes.map((pocketAttribute,index) => {
            var pStyle = JSON.parse(JSON.stringify(pocketStyle));
            pStyle.left = pocketAttribute.x;
            pStyle.top = pocketAttribute.y;
            pStyle.borderRadius = pocketAttribute.borderRadius;
            return (<div style={pStyle}></div>)
          });

          return (<div>{pockets}</div>)
        }
      });

      var Table = React.createClass({
        render: () => <div style={tableStyle}><Stick/><Pocket/><Ball/></div>
      });


      var numOfBalls = 1;

      var Ball = React.createClass({
        render: () => {
          var ballStyle = {
            position: "absolute",
            left: ballLeft + "px",
            top: ballTop + "px",
            backgroundColor: "white",
            borderRadius: "50%",
            height: "23px",
            width: "23px"
          }

          var balls = colors.map((color,index) => {
            var bStyle = JSON.parse(JSON.stringify(ballStyle));
            bStyle.backgroundColor = color;
            bStyle.left = (ballLeft + index * 25) + "px";
            return <div key={index} style={bStyle}></div>
          });

          return (<div>{
            balls
          }</div>)
        }
      });


      var Stick = React.createClass({
        render: () => {
          var stickStyle ={
            position: "absolute",
            height: "10px",
            width: "150px",
            backgroundColor: "brown",
            left: stickLeft,
            top : stickTop
          }
          return <div style={stickStyle}></div>
        }
      });




      var tableStyle = {
        position: "absolute",
        backgroundColor: "green",
        width: "75%",
        height: "75%",
        left: "12.5%",
        top: "12.5%"
      }
      var ballLeft = 50;
      var ballTop = 50;
      var stickLeft = 500;
      var stickTop = 150;
      var ballVx = 0;
      var ballVy = 0;
      var deltaBallX = 5;
      var deltaBallY = 5;
      var deltaStickX = 5;
      var deltaStickY = 5;

      var render = () => React.render(<Table/>,document.body);
      render();

      setInterval(()=> {
        ballLeft += ballVx;
        ballTop += ballVy;
        render();
      },50)

      $(document).keydown((event)=> {
        var keyCode = event.keyCode;
        var codeVelocities = {
          "37": -deltaStickX,
          "39": deltaStickX,
          "38": -deltaStickY,
          "40": deltaStickY
        }
         if (keyCode === 37 || keyCode === 39)
        {
          stickLeft += codeVelocities[keyCode];
        }
        else if (keyCode === 38 || keyCode == 40)
        {
          stickTop += codeVelocities[keyCode]
        }
      });


    </script>
  </body>
</html>
